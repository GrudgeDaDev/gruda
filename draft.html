<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grudge - Season 0 Collection</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/parse@3.5.1/dist/parse.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        grudge: {
                            primary: '#4F2362', // Dark purple
                            accent: '#FFD700', // Gold
                            dark: '#1E1E24', // Near black
                            light: '#F2F2F2', // Off-white
                        },
                        tribe: {
                            silver: '#C0C0C0',
                            red: '#FF4136',
                            purple: '#8A2BE2',
                            orange: '#FF851B',
                            blue: '#00BFFF', // Blue for card text
                        },
                        ethereal: '#00FF7F', // Emerald for signature glow
                        glow: '#00BFFF', // Blue for rarity chart glow
                    },
                    animation: {
                        'glow': 'glow 2s ease-in-out infinite alternate',
                        'silver-glow': 'silverGlow 3s ease-in-out infinite alternate',
                        'red-glow': 'redGlow 3s ease-in-out infinite alternate',
                        'purple-glow': 'purpleGlow 3s ease-in-out infinite alternate',
                        'orange-glow': 'orangeGlow 3s ease-in-out infinite alternate',
                        'ethereal-glow': 'etherealGlow 4s infinite alternate',
                        'mythril-sparkle': 'mythrilSparkle 4s ease-in-out infinite alternate',
                        'float': 'float 3s ease-in-out infinite',
                        'pulse': 'pulse 3s infinite ease-in-out',
                        'signature-slide': 'signatureSlide 8s infinite',
                        'click-me': 'clickMe 10s infinite',
                    },
                    keyframes: {
                        glow: {
                            '0%': { boxShadow: '0 0 5px #4F2362' },
                            '100%': { boxShadow: '0 0 20px #FFD700, 0 0 35px #00FF7F' },
                        },
                        silverGlow: {
                            '0%': { boxShadow: '0 0 5px #C0C0C0' },
                            '100%': { boxShadow: '0 0 20px #C0C0C0, 0 0 30px #FFFFFF' },
                        },
                        redGlow: {
                            '0%': { boxShadow: '0 0 5px #FF4136' },
                            '100%': { boxShadow: '0 0 20px #FF4136, 0 0 30px #FF0000' },
                        },
                        purpleGlow: {
                            '0%': { boxShadow: '0 0 5px #8A2BE2' },
                            '100%': { boxShadow: '0 0 20px #8A2BE2, 0 0 30px #4B0082' },
                        },
                        orangeGlow: {
                            '0%': { boxShadow: '0 0 5px #FF851B' },
                            '100%': { boxShadow: '0 0 20px #FF851B, 0 0 30px #FF6600' },
                        },
                        etherealGlow: {
                            '0%': { boxShadow: '0 0 5px #00FF7F, 0 0 10px #00FF7F' },
                            '100%': { boxShadow: '0 0 15px #00FF7F, 0 0 25px #00FF7F' },
                        },
                        mythrilSparkle: {
                            '0%': { 
                                filter: 'drop-shadow(0 0 5px rgba(120, 190, 255, 0.7))',
                                transform: 'scale(1)',
                            },
                            '50%': { 
                                filter: 'drop-shadow(0 0 10px rgba(160, 220, 255, 0.9)) drop-shadow(0 0 20px rgba(200, 230, 255, 0.5))',
                                transform: 'scale(1.02)',
                            },
                            '100%': { 
                                filter: 'drop-shadow(0 0 7px rgba(140, 200, 255, 0.8))',
                                transform: 'scale(1)',
                            },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-5px)' },
                        },
                        pulse: {
                            '0%, 100%': { opacity: 0.8 },
                            '50%': { opacity: 0.4 },
                        },
                        signatureSlide: {
                            '0%': { left: '-100%', opacity: 0 },
                            '10%': { left: '0', opacity: 1 },
                            '25%': { left: '100%', opacity: 1 },
                            '26%': { opacity: 0 },
                            '100%': { left: '100%', opacity: 0 },
                        },
                        clickMe: {
                            '0%, 20%': { opacity: 1 },
                            '21%, 100%': { opacity: 0 },
                        },
                    },
                },
            },
        };
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            overflow-x: hidden;
            font-family: 'Arial', sans-serif;
            background: #000;
        }
        #webgl {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        .container {
            position: relative;
            z-index: 2;
            max-width: 90%;
            margin: 0 auto;
            padding: 2rem;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .game-card {
            background: rgba(20, 20, 20, 0.9);
            border-radius: 12px;
            padding: 0.5rem;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(15px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
            min-height: 300px;
        }
        .game-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 8px 25px rgba(0, 255, 127, 0.4);
            border-color: #f3ef0c;
        }
        .emerald-gold-border {
            position: relative;
            border: 3px solid #FFD700;
            box-shadow: 0 0 10px #FFD700, 0 0 15px #e29b02;
            background: linear-gradient(45deg, #ffb004, #FFD700, #00FF7F, #FFD700);
            background-size: 400% 400%;
            animation: sparkle 3s linear infinite;
            border-radius: 0.5rem;
            padding: 4px;
        }
        .emerald-gold-border::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #00FF7F, #FFD700, #00FF7F, #FFD700);
            background-size: 400% 400%;
            z-index: -1;
            animation: sparkle 3s linear infinite;
            border-radius: 0.5rem;
        }
        .card-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://i.imgur.com/vruOf5E.png');
            background-size: cover;
            background-position: center;
            opacity: 0.3;
            z-index: -1;
            border-radius: 0.5rem;
        }
        .signature-card-wrapper {
            position: relative;
        }
        .signature-overlay {
            position: absolute;
            top: 50%;
            left: 0;
            width: 100%;
            height: 50%;
            overflow: hidden;
            z-index: 2;
            transform: translateY(-50%);
        }
        .signature-image {
            position: absolute;
            width: 100%;
            height: auto;
            left: -100%;
            animation: signatureSlide 8s infinite;
        }
        .card-text-area {
            background: #000000;
            border-top: 1px solid #FFD700;
            padding: 0.5rem;
        }
        .season0-card {
            position: relative;
            overflow: hidden;
        }
        .ethereal-signature {
            position: relative;
            border: 2px solid #00FF7F;
            box-shadow: 0 0 15px #00FF7F;
        }
        .ethereal-signature::before {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            border: 1px solid rgba(0, 255, 127, 0.5);
            border-radius: 12px;
            animation: pulse 3s infinite ease-in-out;
            pointer-events: none;
            z-index: 1;
        }
        .silver-tribe {
            position: relative;
            overflow: hidden;
        }
        .silver-tribe::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #C0C0C0, #FFFFFF, #A9A9A9, #C0C0C0);
            background-size: 400% 400%;
            z-index: -1;
            animation: sparkle 3s linear infinite;
            border-radius: 0.5rem;
        }
        .red-tribe {
            position: relative;
            overflow: hidden;
        }
        .red-tribe::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #FF4136, #B22222, #8B0000, #FF4136);
            background-size: 400% 400%;
            z-index: -1;
            animation: sparkle 3s linear infinite;
            border-radius: 0.5rem;
        }
        .purple-tribe {
            position: relative;
            overflow: hidden;
        }
        .purple-tribe::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #8A2BE2, #4B0082, #663399, #8A2BE2);
            background-size: 400% 400%;
            z-index: -1;
            animation: sparkle 3s linear infinite;
            border-radius: 0.5rem;
        }
        .orange-tribe {
            position: relative;
            overflow: hidden;
        }
        .orange-tribe::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #FF851B, #FF6600, #D2691E, #FF851B);
            background-size: 400% 400%;
            z-index: -1;
            animation: sparkle 3s linear infinite;
            border-radius: 0.5rem;
        }
        .purple-mana {
            background: linear-gradient(to bottom, #8A2BE2, #4B0082);
            box-shadow: 0 0 10px #8A2BE2;
        }
        .card-image-container {
            position: relative;
            overflow: hidden;
            aspect-ratio: 3/4;
        }
        .mythril-bg {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, 
                rgba(156, 206, 255, 0.7), 
                rgba(110, 180, 255, 0.8),
                rgba(180, 220, 255, 0.9),
                rgba(200, 230, 255, 0.7),
                rgba(140, 190, 255, 0.8)
            );
            background-size: 400% 400%;
            animation: mythrilBg 8s ease infinite;
            filter: drop-shadow(0 0 8px rgba(140, 210, 255, 0.8));
        }
        @keyframes sparkle {
            0% { background-position: 0% 0%; }
            100% { background-position: 200% 200%; }
        }
        @keyframes mythrilBg {
            0% { background-position: 0% 0%; }
            50% { background-position: 100% 100%; }
            100% { background-position: 0% 0%; }
        }
        .card-foreground {
            position: relative;
            z-index: 1;
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        .season0-stamp {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 40px;
            height: 40px;
            z-index: 2;
        }
        .rarity-chart-button {
            position: relative;
            font-size: 1.5rem;
            font-weight: bold;
            letter-spacing: 1px;
            text-shadow: 0 0 10px rgba(0, 191, 255, 0.8);
            color: #FFD700;
            cursor: pointer;
            padding: 0.5rem 1rem;
            background: rgba(20, 20, 20, 0.9);
            border-radius: 8px;
            border: 1px solid #00BFFF;
            box-shadow: 0 0 15px #00BFFF;
            transition: all 0.3s ease;
        }
        .rarity-chart-button:hover {
            box-shadow: 0 0 25px #00BFFF, 0 0 10px #FFD700;
            transform: scale(1.05);
        }
        .rarity-chart-button::before {
            content: 'Click Me';
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            color: #FFD700;
            font-size: 1rem;
            text-shadow: 0 0 10px #00BFFF;
            opacity: 0;
            animation: clickMe 10s infinite;
        }
        .rarity-chart-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        .rarity-chart-container.active {
            opacity: 1;
            pointer-events: auto;
        }
        .rarity-chart {
            background: rgba(20, 20, 20, 0.9);
            border: 2px solid #FFD700;
            border-radius: 1rem;
            padding: 2rem;
            max-width: 900px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 0 30px rgba(0, 255, 127, 0.7);
            backdrop-filter: blur(15px);
        }
        .tooltip {
            position: absolute;
            background: rgba(20, 20, 20, 0.9);
            border: 1px solid #FFD700;
            border-radius: 5px;
            padding: 5px 10px;
            color: #F2F2F2;
            font-size: 12px;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s ease;
            backdrop-filter: blur(10px);
        }
        .card-grid {
            display: grid;
            grid-template-columns: repeat(5, minmax(0, 1fr));
            gap: 2rem;
            width: 100%;
            margin-top: 2rem;
        }
        @media (max-width: 1024px) {
            .card-grid {
                grid-template-columns: repeat(3, minmax(0, 1fr));
                gap: 1.5rem;
            }
        }
        @media (max-width: 768px) {
            .card-grid {
                grid-template-columns: repeat(2, minmax(0, 1fr));
                gap: 1rem;
            }
            .container {
                padding: 1rem;
            }
        }
        @media (max-width: 480px) {
            .card-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <canvas id="webgl"></canvas>

    <div class="container">
        <!-- Season 0 Collection -->
        <h2 class="text-3xl font-bold text-grudge-accent mb-6 animate-glow text-center">Season 0 Collection</h2>

        <div class="flex justify-between mb-6 flex-wrap gap-4 w-full">
            <div class="flex space-x-4 items-center">
                <input type="text" id="card-search" placeholder="Search cards..." class="bg-[rgba(20,20,20,0.9)] border border-grudge-primary rounded px-3 py-2 text-grudge-light backdrop-filter blur-[10px]">
                <button id="open-pack-btn" class="bg-grudge-primary hover:bg-opacity-80 px-4 py-2 rounded animate-glow">Open Card Pack</button>
                <select id="card-filter" class="bg-[rgba(20,20,20,0.9)] border border-grudge-primary rounded px-2 py-2 text-grudge-light backdrop-filter blur-[10px]">
                    <option value="all">All Cards</option>
                    <option value="minion">Minions</option>
                    <option value="spell">Spells</option>
                    <option value="ship">Ships</option>
                    <option value="unique">Uniques</option>
                    <option value="silver">Iron Will (Silver)</option>
                    <option value="red">Blood For Conquest (Red)</option>
                    <option value="purple">Fabled (Purple)</option>
                    <option value="orange">Tribal War (Orange)</option>
                    <option value="owned">My Collection</option>
                </select>
            </div>
        </div>

        <!-- Rarity Chart Button -->
        <div class="flex justify-center mb-6">
            <div id="rarity-chart-btn" class="rarity-chart-button">RARITY CHART</div>
        </div>

        <!-- Fortune Favor Guide -->
        <div class="bg-[rgba(20,20,20,0.9)] border border-ethereal rounded-lg p-6 mb-6 emerald-gold-border animate-ethereal-glow w-full backdrop-filter blur-[15px]">
            <h3 class="text-xl font-bold text-grudge-accent mb-4 animate-glow">Season 0 Fortune Favor Tribes</h3>
            <p class="text-gray-300 mb-4">Each card in Season 0 belongs to one of four tribes, each with unique effects that shape your strategy. Master these synergies to dominate your opponents!</p>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mt-4">
                <div class="bg-[rgba(20,20,20,0.9)] border border-tribe-silver rounded-lg p-4 silver-tribe animate-silver-glow backdrop-filter blur-[10px]">
                    <h4 class="font-bold text-tribe-silver">Iron Will</h4>
                    <p class="text-sm mb-2">+1 extra health over normal</p>
                    <p class="text-xs text-gray-400">Tribe Effect: If there is a Silver card on the field, gain Taunt on summon.</p>
                    <p class="text-xs text-grudge-accent mt-2">Strategy: Use Iron Will cards to create a defensive wall, protecting your key units.</p>
                </div>
                <div class="bg-[rgba(20,20,20,0.9)] border border-tribe-red rounded-lg p-4 red-tribe animate-red-glow backdrop-filter blur-[10px]">
                    <h4 class="font-bold text-tribe-red">Blood For Conquest</h4>
                    <p class="text-sm mb-2">+1 extra attack over normal</p>
                    <p class="text-xs text-gray-400">Tribe Effect: If a Red card is on battlefield and you play another Red, it has Haste.</p>
                    <p class="text-xs text-grudge-accent mt-2">Strategy: Swarm the board with Red cards to overwhelm enemies with fast attacks.</p>
                </div>
                <div class="bg-[rgba(20,20,20,0.9)] border border-tribe-purple rounded-lg p-4 purple-tribe animate-purple-glow backdrop-filter blur-[10px]">
                    <h4 class="font-bold text-tribe-purple">Fabled</h4>
                    <p class="text-sm mb-2">Cost one less mana than normal</p>
                    <p class="text-xs text-gray-400">Tribe Effect: If Purple is in your hand, other Purples cost one less (stacking, min 0).</p>
                    <p class="text-xs text-grudge-accent mt-2">Strategy: Play Purple cards early to gain tempo and set up powerful combos.</p>
                </div>
                <div class="bg-[rgba(20,20,20,0.9)] border border-tribe-orange rounded-lg p-4 orange-tribe animate-orange-glow backdrop-filter blur-[10px]">
                    <h4 class="font-bold text-tribe-orange">Tribal War</h4>
                    <p class="text-sm mb-2">Summon a 1/1 with Taunt when played</p>
                    <p class="text-xs text-gray-400">Tribe Effect: Give all Orange cards +1 Health on summon if an Orange is on battlefield.</p>
                    <p class="text-xs text-grudge-accent mt-2">Strategy: Build an army of minions with Orange cards to control the board.</p>
                </div>
            </div>
        </div>

        <div class="card-grid" id="card-container">
            <!-- Cards will be loaded here -->
        </div>
    </div>

    <!-- Card Detail Modal -->
    <div id="card-detail-modal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50">
        <div class="bg-[rgba(20,20,20,0.9)] border border-ethereal rounded-lg max-w-4xl w-full max-h-[90vh] overflow-auto p-6 emerald-gold-border backdrop-filter blur-[15px]">
            <div class="flex justify-between items-start mb-4">
                <h2 id="modal-card-name" class="text-2xl font-bold text-grudge-accent animate-glow">Card Name</h2>
                <button id="close-modal-btn" class="text-gray-400 hover:text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="flex justify-center">
                    <div id="modal-card-container" class="w-64 h-80 bg-grudge-primary rounded-lg relative overflow-hidden emerald-gold-border ethereal-signature season0-card animate-ethereal-glow">
                        <div class="card-background"></div>
                        <div class="signature-overlay">
                            <img src="https://i.imgur.com/d4I8ej6.png" alt="Signature" class="signature-image">
                        </div>
                        <div id="modal-card-image" class="relative w-full h-full">
                            <div class="mythril-bg animate-mythril-sparkle"></div>
                            <img id="modal-card-fg" class="relative w-full h-full object-contain" src="" alt="Card Image">
                            <img id="modal-season0-stamp" class="absolute top-5 right-5 w-10 h-10" src="https://i.imgur.com/SRoq392.png" alt="Season0 Stamp">
                        </div>
                    </div>
                </div>
                <div>
                    <div class="mb-4">
                        <h3 class="text-lg font-semibold text-grudge-accent mb-2">Card Stats</h3>
                        <div class="grid grid-cols-2 gap-2">
                            <div class="bg-grudge-primary bg-opacity-40 p-2 rounded">
                                <span class="text-sm text-gray-400">Attack</span>
                                <div id="modal-card-atk" class="text-lg font-bold text-grudge-accent">N/A</div>
                            </div>
                            <div class="bg-grudge-primary bg-opacity-40 p-2 rounded">
                                <span class="text-sm text-gray-400">Health</span>
                                <div id="modal-card-hp" class="text-lg font-bold text-grudge-accent">N/A</div>
                            </div>
                            <div class="bg-grudge-primary bg-opacity-40 p-2 rounded">
                                <span class="text-sm text-gray-400">Cost</span>
                                <div id="modal-card-cost" class="text-lg font-bold text-grudge-accent">1</div>
                            </div>
                            <div class="bg-grudge-primary bg-opacity-40 p-2 rounded">
                                <span class="text-sm text-gray-400">Type</span>
                                <div id="modal-card-type" class="text-lg font-bold text-grudge-accent">Minion</div>
                            </div>
                        </div>
                    </div>
                    <div id="modal-tribe-section" class="mb-4">
                        <h3 class="text-lg font-semibold text-grudge-accent mb-2">Fortune Favor</h3>
                        <div id="modal-tribe-info" class="bg-grudge-primary bg-opacity-20 p-3 rounded">
                            <h4 id="modal-tribe-name" class="font-medium text-grudge-accent">None</h4>
                            <p id="modal-tribe-effect" class="text-sm text-gray-400">No Fortune Favor effect.</p>
                        </div>
                    </div>
                    <div class="mb-4">
                        <h3 class="text-lg font-semibold text-grudge-accent mb-2">Description</h3>
                        <p id="modal-card-desc" class="text-gray-300">Card description goes here.</p>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold text-grudge-accent mb-2">Game Usage</h3>
                        <div class="space-y-2">
                            <div class="bg-grudge-primary bg-opacity-20 p-3 rounded">
                                <h4 class="font-medium text-grudge-accent">Crown</h4>
                                <p class="text-sm text-gray-400">Standard card with versatile usage.</p>
                            </div>
                            <div class="bg-grudge-primary bg-opacity-20 p-3 rounded">
                                <h4 class="font-medium text-grudge-accent">Battle</h4>
                                <p class="text-sm text-gray-400">Enhances combat abilities.</p>
                            </div>
                            <div class="bg-grudge-primary bg-opacity-20 p-3 rounded">
                                <h4 class="font-medium text-grudge-accent">Crawl</h4>
                                <p class="text-sm text-gray-400">Provides strategic advantages.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Card Pack Opening Modal -->
    <div id="pack-opening-modal" class="hidden fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50">
        <div class="text-center">
            <h2 class="text-2xl font-bold text-grudge-accent mb-6 animate-glow">Opening Season 0 Pack</h2>
            <div id="pack-container" class="flex justify-center gap-4 flex-wrap">
                <div class="w-32 h-48 bg-grudge-primary rounded-lg cursor-pointer transform transition hover:scale-105 hover:rotate-3 game-card"></div>
                <div class="w-32 h-48 bg-grudge-primary rounded-lg cursor-pointer transform transition hover:scale-105 hover:-rotate-3 game-card"></div>
                <div class="w-32 h-48 bg-grudge-primary rounded-lg cursor-pointer transform transition hover:scale-105 hover:rotate-2 game-card"></div>
                <div class="w-32 h-48 bg-grudge-primary rounded-lg cursor-pointer transform transition hover:scale-105 hover:-rotate-2 game-card"></div>
                <div class="w-32 h-48 bg-grudge-primary rounded-lg cursor-pointer transform transition hover:scale-105 hover:rotate-1 game-card"></div>
            </div>
            <p class="mt-6 text-gray-400">Click on each card to reveal</p>
            <button id="close-pack-btn" class="mt-4 bg-grudge-primary hover:bg-opacity-80 px-4 py-2 rounded hidden animate-glow">Done</button>
        </div>
    </div>

    <!-- Rarity Chart Modal -->
    <div id="rarity-chart-container" class="rarity-chart-container">
        <div class="rarity-chart emerald-gold-border">
            <div class="flex justify-between items-start mb-4">
                <h2 class="text-2xl font-bold text-grudge-accent animate-glow">Season 0 Rarity Chart</h2>
                <button id="close-rarity-chart" class="text-gray-400 hover:text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="mb-6">
                <h3 class="text-xl font-bold text-grudge-accent mb-3">The Story of Ethereal Signatures</h3>
                <p class="text-gray-300 mb-4">
                    In the Season 0 collection, Ethereal Signature cards are the pinnacle of rarity, with only one copy of each card type possessing this trait across the entire game. With a total mint cap of 100,000 Season 0 cards, these 1-of-1 cards are highly coveted.
                </p>
                <p class="text-gray-300 mb-4">
                    Each Ethereal Signature card features a mythril background, a radiant emerald and gold border, and a dynamic signature animation that signifies its uniqueness. These cards gain enhanced gameplay effects (+1/+1 stats, cost reduction) and stunning visuals.
                </p>
                <p class="text-gray-300">
                    Every card belongs to one of four tribes, each with a 25% distribution, offering strategic synergies to build powerful decks.
                </p>
            </div>
            <div class="mb-6">
                <h3 class="text-xl font-bold text-grudge-accent mb-3">Rarity Breakdown</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-bold text-grudge-accent mb-2">Fortune Favor Tribes</h4>
                        <div class="space-y-4">
                            <div class="bg-[rgba(20,20,20,0.9)] border border-tribe-silver rounded p-3 silver-tribe animate-silver-glow backdrop-filter blur-[10px]">
                                <div class="flex justify-between">
                                    <span class="font-bold text-tribe-silver">Iron Will (Silver)</span>
                                    <span class="text-grudge-light">25%</span>
                                </div>
                                <p class="text-sm text-gray-400 mt-1">Defensive tribe with +1 Health and Taunt effects.</p>
                            </div>
                            <div class="bg-[rgba(20,20,20,0.9)] border border-tribe-red rounded p-3 red-tribe animate-red-glow backdrop-filter blur-[10px]">
                                <div class="flex justify-between">
                                    <span class="font-bold text-tribe-red">Blood For Conquest (Red)</span>
                                    <span class="text-grudge-light">25%</span>
                                </div>
                                <p class="text-sm text-gray-400 mt-1">Aggressive tribe with +1 Attack and Haste effects.</p>
                            </div>
                            <div class="bg-[rgba(20,20,20,0.9)] border border-tribe-purple rounded p-3 purple-tribe animate-purple-glow backdrop-filter blur-[10px]">
                                <div class="flex justify-between">
                                    <span class="font-bold text-tribe-purple">Fabled (Purple)</span>
                                    <span class="text-grudge-light">25%</span>
                                </div>
                                <p class="text-sm text-gray-400 mt-1">Mana-efficient tribe with cost reduction effects.</p>
                            </div>
                            <div class="bg-[rgba(20,20,20,0.9)] border border-tribe-orange rounded p-3 orange-tribe animate-orange-glow backdrop-filter blur-[10px]">
                                <div class="flex justify-between">
                                    <span class="font-bold text-tribe-orange">Tribal War (Orange)</span>
                                    <span class="text-grudge-light">25%</span>
                                </div>
                                <p class="text-sm text-gray-400 mt-1">Swarm tribe with summoning and Health buffs.</p>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h4 class="font-bold text-grudge-accent mb-2">Ethereal Signature</h4>
                        <div class="space-y-4">
                            <div class="bg-[rgba(20,20,20,0.9)] border border-ethereal rounded p-3 ethereal-signature animate-ethereal-glow backdrop-filter blur-[10px]">
                                <div class="flex justify-between">
                                    <span class="font-bold text-ethereal">Ethereal Signature</span>
                                    <span class="text-grudge-light">Unique (1 per card type)</span>
                                </div>
                                <p class="text-sm text-gray-400 mt-1">Grants +1/+1 stats, cost reduction, and enhanced visuals. Only one of each card type can be an Ethereal Signature.</p>
                                <p class="text-xs text-grudge-accent mt-2">Total Mint Cap: 100,000 Season 0 cards</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <h3 class="text-xl font-bold text-grudge-accent mb-3">Tribe Strategy Guide</h3>
                <p class="text-gray-300 mb-4">
                    Combine tribes to create powerful synergies and dominate the battlefield.
                </p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="bg-[rgba(20,20,20,0.9)] border border-grudge-primary rounded p-3 backdrop-filter blur-[10px]">
                        <h4 class="font-bold text-grudge-accent">Iron Will + Blood For Conquest</h4>
                        <p class="text-sm text-gray-400">Use Silver's Taunt to protect Red attackers for a balanced strategy.</p>
                    </div>
                    <div class="bg-[rgba(20,20,20,0.9)] border border-grudge-primary rounded p-3 backdrop-filter blur-[10px]">
                        <h4 class="font-bold text-grudge-accent">Fabled + Tribal War</h4>
                        <p class="text-sm text-gray-400">Purple's cost reduction enables rapid Orange minion deployment.</p>
                    </div>
                    <div class="bg-[rgba(20,20,20,0.9)] border border-grudge-primary rounded p-3 backdrop-filter blur-[10px]">
                        <h4 class="font-bold text-grudge-accent">Iron Will + Tribal War</h4>
                        <p class="text-sm text-gray-400">Create a defensive wall with Silver and Orange summoning effects.</p>
                    </div>
                    <div class="bg-[rgba(20,20,20,0.9)] border border-grudge-primary rounded p-3 backdrop-filter blur-[10px]">
                        <h4 class="font-bold text-grudge-accent">Blood For Conquest + Fabled</h4>
                        <p class="text-sm text-gray-400">Deploy Red attackers early with Purple's mana efficiency.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Parse SDK
        Parse.initialize('gweV5ZdFH1KoB5UjbMWaL1p3ibrWwP60x3h209wN', 'tkhLbN9t0i0z31FTjYQySkrgPNgjoUWbOSQ3FWxd');
        Parse.serverURL = 'https://parseapi.back4app.com/';

        // Tribe Data
        const tribeData = {
            silver: {
                name: 'Iron Will',
                color: 'text-tribe-silver',
                cssClass: 'silver-tribe',
                statBonus: { hp: 1 },
                description: '+1 extra health over normal',
                effect: 'If there is a Silver card on the field, gain Taunt on summon.',
                gameplayText: 'Iron Will: Gain +1 health. If another Silver card is on the field, gain Taunt when summoned.',
            },
            red: {
                name: 'Blood For Conquest',
                color: 'text-tribe-red',
                cssClass: 'red-tribe',
                statBonus: { atk: 1 },
                description: '+1 extra attack over normal',
                effect: 'If a Red card is on battlefield and you play another Red, it has Haste.',
                gameplayText: 'Blood For Conquest: Gain +1 attack. If another Red card is on the battlefield, gain Haste when summoned.',
            },
            purple: {
                name: 'Fabled',
                color: 'text-tribe-purple',
                cssClass: 'purple-tribe',
                statBonus: { cost: -1 },
                description: 'Cost one less mana than normal',
                effect: 'If Purple is in your hand, other Purples cost one less (stacking, min 0).',
                gameplayText: 'Fabled: Costs 1 less mana. If you have another Purple card in your hand, other Purple cards cost 1 less (stacking, no less than 0).',
            },
            orange: {
                name: 'Tribal War',
                color: 'text-tribe-orange',
                cssClass: 'orange-tribe',
                statBonus: { summon: '1/1 Taunt' },
                description: 'Summon a 1/1 with Taunt when played',
                effect: 'Give all Orange cards +1 Health on summon if an Orange is on battlefield.',
                gameplayText: 'Tribal War: Summon a 1/1 with Taunt when played. If another Orange card is on the battlefield, all Orange cards gain +1 Health when summoned.',
            },
        };

        // Card Data (continued from provided JSON)
        const allCards = [
            {"cardId": "001", "name": "Stealth Drone", "type": "minion", "atk": 1, "hp": 1, "cost": 1, "description": "Quick scouting unit cloaked in shadow.", "image": "https://i.imgur.com/zMFckYB.png", "startingAmount": 2},
            {"cardId": "002", "name": "A Coward Priest", "type": "minion", "atk": 1, "hp": 1, "cost": 1, "description": "Basic reconnaissance unit.", "image": "https://i.imgur.com/DHS25YU.jpeg", "startingAmount": 2},
            {"cardId": "003", "name": "Starborn Light", "type": "minion", "atk": 1, "hp": 1, "cost": 1, "description": "Summons structures.", "image": "https://i.imgur.com/AvsiFog.png", "startingAmount": 2},
            {"cardId": "004", "name": "Arcane Mystic", "type": "minion", "atk": 2, "hp": 3, "cost": 2, "description": "Casts arcane spells with finesse.", "image": "https://i.imgur.com/Enu1T7Y.png", "startingAmount": 2},
            {"cardId": "005", "name": "Alpha Skiff", "type": "minion", "atk": 1, "hp": 2, "cost": 2, "description": "On play: Deal 2 damage to an enemy.", "image": "https://i.imgur.com/z1fbkXx.png", "startingAmount": 2},
            {"cardId": "006", "name": "Orcish Sniper", "type": "minion", "atk": 2, "hp": 1, "cost": 2, "description": "Ranged attacker.", "image": "https://i.imgur.com/nlkfMpI.png", "startingAmount": 2},
            {"cardId": "007", "name": "Mace Assassin", "type": "minion", "atk": 4, "hp": 2, "cost": 3, "description": "Strikes with venomous precision.", "image": "https://i.imgur.com/3SkE6VG.png", "startingAmount": 2},
            {"cardId": "008", "name": "Swarm Legion", "type": "minion", "atk": 3, "hp": 3, "cost": 3, "description": "Overruns the enemy in numbers.", "image": "https://i.imgur.com/Wn84v6I.png", "startingAmount": 2},
            {"cardId": "009", "name": "Ethereal Phantom", "type": "minion", "atk": 2, "hp": 3, "cost": 3, "description": "Haunts the battlefield.", "image": "https://i.imgur.com/v0RBTiV.png", "startingAmount": 2},
            {"cardId": "010", "name": "Crimson Shade", "type": "minion", "atk": 2, "hp": 3, "cost": 3, "description": "Burns with crimson energy.", "image": "https://i.imgur.com/36iR3J8.png", "startingAmount": 2},
            {"cardId": "011", "name": "Logs Much", "type": "minion", "atk": 2, "hp": 3, "cost": 3, "description": "Wooden with Steel presence.", "image": "https://i.imgur.com/PFbnxct.png", "startingAmount": 2},
            {"cardId": "012", "name": "Luminous Watcher", "type": "minion", "atk": 2, "hp": 3, "cost": 3, "description": "Heals all for 1 each turn.", "image": "https://i.imgur.com/eg8FESL.png", "startingAmount": 2},
            {"cardId": "013", "name": "Patrol Frigate", "type": "minion", "atk": 2, "hp": 3, "cost": 3, "description": "Standard patrol vessel.", "image": "https://i.imgur.com/nJMY8NA.png", "startingAmount": 2},
            {"cardId": "014", "name": "Battle Commander", "type": "minion", "atk": 2, "hp": 4, "cost": 3, "description": "Leads the charge.", "image": "https://i.imgur.com/ABsno64.png", "startingAmount": 2},
            {"cardId": "015", "name": "Night Wraith", "type": "minion", "atk": 4, "hp": 3, "cost": 4, "description": "Strikes from the shadows.", "image": "https://i.imgur.com/PSpj7sO.png", "startingAmount": 1},
            {"cardId": "016", "name": "Night Lord", "type": "minion", "atk": 4, "hp": 3, "cost": 4, "description": "Roams from the shadows.", "image": "https://i.imgur.com/qpsLIcS.png", "startingAmount": 1},
            {"cardId": "017", "name": "Crimson Revenant", "type": "minion", "atk": 4, "hp": 3, "cost": 4, "description": "Strikes with fiery intent.", "image": "https://i.imgur.com/8YIqCl5.png", "startingAmount": 1},
            {"cardId": "018", "name": "Emerald Stalker", "type": "minion", "atk": 4, "hp": 3, "cost": 4, "description": "Strikes with emerald fury.", "image": "https://i.imgur.com/5t6kGOi.jpeg", "startingAmount": 1},
            {"cardId": "019", "name": "Storm Cavalier", "type": "minion", "atk": 4, "hp": 4, "cost": 4, "description": "Rides the storm into battle.", "image": "https://i.imgur.com/nBUKWdy.png", "startingAmount": 1},
            {"cardId": "020", "name": "Flame Charger", "type": "minion", "atk": 4, "hp": 4, "cost": 4, "description": "Charges with fiery speed.", "image": "https://i.imgur.com/cep6ytB.png", "startingAmount": 1},
            {"cardId": "021", "name": "Ra Cal Vin", "type": "minion", "atk": 4, "hp": 4, "cost": 4, "description": "Glides with icy Language.", "image": "https://i.imgur.com/XbSuPyC.png", "startingAmount": 1},
            {"cardId": "022", "name": "Beta Cruiser", "type": "minion", "atk": 3, "hp": 3, "cost": 4, "description": "On play: Deal 5 damage to an enemy.", "image": "https://i.imgur.com/JuxTEX9.png", "startingAmount": 1},
            {"cardId": "023", "name": "Enigmatic Warrior", "type": "minion", "atk": 3, "hp": 3, "cost": 4, "description": "Mysterious combatant.", "image": "https://i.imgur.com/JwcxWth.png", "startingAmount": 1},
            {"cardId": "024", "name": "Barrier Sentinel", "type": "minion", "atk": 0, "hp": 7, "cost": 5, "description": "Unyielding defense with Taunt.", "image": "https://i.imgur.com/klAa6aX.png", "startingAmount": 1},
            {"cardId": "025", "name": "Void Sorcerer", "type": "minion", "atk": 3, "hp": 4, "cost": 5, "description": "Casts protective dark magic.", "image": "https://i.imgur.com/2XhqS6d.png", "startingAmount": 1},
            {"cardId": "026", "name": "Light Mage", "type": "minion", "atk": 3, "hp": 4, "cost": 5, "description": "Shields with radiant magic.", "image": "https://i.imgur.com/cMLK4Oq.png", "startingAmount": 1},
            {"cardId": "027", "name": "Spectral Warrior", "type": "minion", "atk": 5, "hp": 4, "cost": 5, "description": "Fights with ghostly strength.", "image": "https://i.imgur.com/n2b1ugT.png", "startingAmount": 1},
            {"cardId": "028", "name": "Radiant Paladin", "type": "minion", "atk": 5, "hp": 4, "cost": 5, "description": "Shines with radiant power.", "image": "https://i.imgur.com/TalRqz3.png", "startingAmount": 1},
            {"cardId": "029", "name": "Vitality Totem", "type": "minion", "atk": 3, "hp": 5, "cost": 5, "description": "Heals all for 2 each turn.", "image": "https://i.imgur.com/SAL2oQY.png", "startingAmount": 1},
            {"cardId": "030", "name": "Ironclad Titan", "type": "minion", "atk": 4, "hp": 4, "cost": 5, "description": "Heavy armored enforcer.", "image": "https://i.imgur.com/yUzjTDm.png", "startingAmount": 1},
            {"cardId": "031", "name": "Overlord Mind", "type": "minion", "atk": 4, "hp": 4, "cost": 5, "description": "Taunt.", "image": "https://i.imgur.com/LspYMpz.png", "startingAmount": 1},
            {"cardId": "032", "name": "Celestial Warden", "type": "minion", "atk": 5, "hp": 5, "cost": 6, "description": "Heals all for 1 each turn.", "image": "https://i.imgur.com/6CXJn5s.png", "startingAmount": 0},
            {"cardId": "033", "name": "Abyssal Keeper", "type": "minion", "atk": 5, "hp": 5, "cost": 6, "description": "Heals all with dark energy.", "image": "https://i.imgur.com/3b2RmGQ.png", "startingAmount": 0},
            {"cardId": "034", "name": "Arcane Missile", "type": "spell", "cost": 1, "description": "Deal 3 damage to a random enemy.", "image": "https://i.imgur.com/jQbF07m.png", "startingAmount": 1},
            {"cardId": "035", "name": "Shadow Strike", "type": "spell", "cost": 2, "description": "Deal 4 damage to a target enemy.", "image": "https://i.imgur.com/oPFVuMN.png", "startingAmount": 1},
            {"cardId": "036", "name": "Healing Wave", "type": "spell", "cost": 3, "description": "Restore 6 health to a friendly character.", "image": "https://i.imgur.com/PgLXUx8.png", "startingAmount": 1},
            {"cardId": "037", "name": "Mind Control", "type": "spell", "cost": 8, "description": "Take control of an enemy minion.", "image": "https://i.imgur.com/dC1AKPu.png", "startingAmount": 0},
            {"cardId": "038", "name": "Starship Alpha", "type": "minion", "atk": 2, "hp": 2, "cost": 2, "description": "Stealth. Gains +1 atk in space-themed games.", "image": "https://i.imgur.com/scyPIUs.png", "startingAmount": 1},
            {"cardId": "039", "name": "Star Hut", "type": "minion", "atk": 0, "hp": 5, "cost": 3, "description": "Taunt. Heals adjacent allies for 1 in Island.", "image": "https://i.imgur.com/TCYVocs.png", "startingAmount": 1},
            {"cardId": "040", "name": "Engineer Prime", "type": "minion", "atk": 4, "hp": 4, "cost": 6, "description": "Super Rare. On play: Give all allies +2 atk in Warlords.", "image": "https://i.imgur.com/KpHvcmW.mp4", "startingAmount": 0},
            {"cardId": "041", "name": "Starship Beta", "type": "minion", "atk": 3, "hp": 3, "cost": 4, "description": "Deals +2 damage to structures in RTS.", "image": "https://i.imgur.com/BSurWbZ.png", "startingAmount": 1},
            {"cardId": "042", "name": "Starship Gamma", "type": "minion", "atk": 2, "hp": 4, "cost": 4, "description": "Heals allies for 1 in Crawl.", "image": "https://i.imgur.com/5PSOVVc.png", "startingAmount": 1},
            {"cardId": "043", "name": "Star Cruiser", "type": "minion", "atk": 6, "hp": 5, "cost": 7, "description": "On play: Deal 3 damage to all enemies in Battle.", "image": "https://i.imgur.com/Ldfm3An.png", "startingAmount": 0},
            {"cardId": "044", "name": "Fireball", "type": "spell", "cost": 4, "description": "Deal 6 damage to a target. +2 damage in Warlords.", "image": "https://i.imgur.com/V1HCiAI.jpg", "startingAmount": 1},
            {"cardId": "045", "name": "Undead", "type": "minion", "atk": 3, "hp": 3, "cost": 3, "description": "Grants Undead Hardcore Island character. +1 hp in Island.", "image": "https://i.imgur.com/8YIqCl5.png", "startingAmount": 0},
            {"cardId": "046", "name": "Human", "type": "minion", "atk": 3, "hp": 3, "cost": 3, "description": "Grants Human Hardcore Island character. +1 atk in Warlords.", "image": "https://i.imgur.com/0XcU175.png", "startingAmount": 0},
            {"cardId": "047", "name": "Orc", "type": "minion", "atk": 4, "hp": 2, "cost": 3, "description": "Grants Orc Hardcore Island character. Haste in Battle.", "image": "https://i.imgur.com/nlkfMpI.png", "startingAmount": 0},
            {"cardId": "048", "name": "Elf", "type": "minion", "atk": 2, "hp": 4, "cost": 3, "description": "Grants Elf Hardcore Island character. +1 cost reduction in Crawl.", "image": "https://i.imgur.com/6CXJn5s.png", "startingAmount": 0},
            {"cardId": "049", "name": "Dwarf", "type": "minion", "atk": 3, "hp": 3, "cost": 3, "description": "Grants Dwarf Hardcore Island character. +2 hp in Tower.", "image": "https://i.imgur.com/nBUKWdy.png", "startingAmount": 0},
            {"cardId": "050", "name": "Barbarian", "type": "minion", "atk": 4, "hp": 3, "cost": 3, "description": "Grants Barbarian Hardcore Island character. +1 atk in Island.", "image": "https://i.imgur.com/a9H86By.png", "startingAmount": 0},
            {"cardId": "051", "name": "Skeleton NB", "type": "minion", "atk": 2, "hp": 3, "cost": 2, "description": "Swift skeletal fighter with a mace.", "image": "https://i.imgur.com/Dh99XuH.png", "startingAmount": 2},
            {"cardId": "052", "name": "Scourge Warrior", "type": "minion", "atk": 4, "hp": 3, "cost": 4, "description": "Dark warrior with a cursed blade.", "image": "https://i.imgur.com/NFjvmxO.png", "startingAmount": 1},
            {"cardId": "053", "name": "Orc NB", "type": "minion", "atk": 2, "hp": 2, "cost": 2, "description": "Stealthy orc scout.", "image": "https://i.imgur.com/zMFckYB.png", "startingAmount": 2},
            {"cardId": "054", "name": "Barbarian Mace", "type": "minion", "atk": 4, "hp": 2, "cost": 3, "description": "Barbarian wielding a heavy mace.", "image": "https://i.imgur.com/3SkE6VG.png", "startingAmount": 2},
            {"cardId": "055", "name": "Human NB", "type": "minion", "atk": 3, "hp": 4, "cost": 4, "description": "Versatile human defender with a shield.", "image": "https://i.imgur.com/klAa6aX.png", "startingAmount": 1},
            {"cardId": "056", "name": "Dwarf", "type": "minion", "atk": 3, "hp": 5, "cost": 4, "description": "Sturdy dwarf with a hammer.", "image": "https://i.imgur.com/Wn84v6I.png", "startingAmount": 1},
            {"cardId": "057", "name": "Elf Archer", "type": "minion", "atk": 3, "hp": 2, "cost": 3, "description": "Precise elf archer with a bow.", "image": "https://i.imgur.com/Enu1T7Y.png", "startingAmount": 2},
            {"cardId": "058", "name": "Knight", "type": "minion", "atk": 5, "hp": 5, "cost": 6, "description": "Armored knight with a greatsword.", "image": "https://i.imgur.com/s0cMpSi.png", "startingAmount": 0},
            {"cardId": "059", "name": "Dwarf Knight NB", "type": "minion", "atk": 4, "hp": 5, "cost": 5, "description": "Heavily armored dwarf knight.", "image": "https://i.imgur.com/TalRqz3.png", "startingAmount": 1},
            {"cardId": "060", "name": "Yorda", "type": "minion", "atk": 5, "hp": 4, "cost": 6, "description": "Bats with thunderous force.", "image": "https://i.imgur.com/UvZsOLQ.png", "startingAmount": 0},
            {"cardId": "061", "name": "Magician NB", "type": "minion", "atk": 3, "hp": 3, "cost": 4, "description": "Casts arcane spells with a staff.", "image": "https://i.imgur.com/PSpj7sO.png", "startingAmount": 1},
            {"cardId": "062", "name": "Calvin", "type": "minion", "atk": 4, "hp": 4, "cost": 4, "description": "Glides with icy magic.", "image": "https://i.imgur.com/XbSuPyC.png", "startingAmount": 1},
            {"cardId": "063", "name": "NB Undead", "type": "minion", "atk": 3, "hp": 3, "cost": 3, "description": "Undead soldier with enduring spirit.", "image": "https://i.imgur.com/8YIqCl5.png", "startingAmount": 1},
            {"cardId": "064", "name": "NB Human Wizard", "type": "minion", "atk": 3, "hp": 3, "cost": 4, "description": "Human wizard casting powerful spells.", "image": "https://i.imgur.com/0XcU175.png", "startingAmount": 1},
            {"cardId": "065", "name": "Human Archer NB", "type": "minion", "atk": 3, "hp": 2, "cost": 3, "description": "Human archer with deadly aim.", "image": "https://i.imgur.com/jKE3ClI.png", "startingAmount": 2},
            {"cardId": "066", "name": "Undead NB", "type": "minion", "atk": 2, "hp": 4, "cost": 3, "description": "Undead warrior with a shield.", "image": "https://i.imgur.com/XJ8Saun.png", "startingAmount": 2},
            {"cardId": "067", "name": "NB Undead Archer", "type": "minion", "atk": 3, "hp": 2, "cost": 3, "description": "Undead archer with ghostly arrows.", "image": "https://i.imgur.com/fGDbB5o.png", "startingAmount": 2},
            {"cardId": "068", "name": "Barrel Weapon", "type": "minion", "atk": 2, "hp": 3, "cost": 3, "description": "Explosive barrel used as a weapon.", "image": "https://i.imgur.com/PFbnxct.png", "startingAmount": 2},
            {"cardId": "069", "name": "Orc Archer NB", "type": "minion", "atk": 3, "hp": 2, "cost": 3, "description": "Orc archer with a heavy bow.", "image": "https://i.imgur.com/nlkfMpI.png", "startingAmount": 2},
            {"cardId": "070", "name": "Priest NB", "type": "minion", "atk": 2, "hp": 4, "cost": 4, "description": "Heals allies with divine light.", "image": "https://i.imgur.com/6CXJn5s.png", "startingAmount": 1},
            {"cardId": "071", "name": "Paladin NB", "type": "minion", "atk": 5, "hp": 5, "cost": 6, "description": "Protects with holy power.", "image": "https://i.imgur.com/3b2RmGQ.png", "startingAmount": 0},
            {"cardId": "072", "name": "Orc Heavy", "type": "minion", "atk": 5, "hp": 4, "cost": 5, "description": "Heavy orc with a massive axe.", "image": "https://i.imgur.com/cep6ytB.png", "startingAmount": 1},
            {"cardId": "073", "name": "Human Heavy", "type": "minion", "atk": 4, "hp": 5, "cost": 5, "description": "Heavily armored human warrior.", "image": "https://i.imgur.com/UT8Yfo2.png", "startingAmount": 1},
            {"cardId": "074", "name": "Undead Heavy", "type": "minion", "atk": 4, "hp": 5, "cost": 5, "description": "Undead giant with a spiked club.", "image": "https://i.imgur.com/9Prc8Md.png", "startingAmount": 1},
            {"cardId": "075", "name": "WareTree", "type": "minion", "atk": 3, "hp": 6, "cost": 5, "description": "Living tree that attacks with roots.", "image": "https://i.imgur.com/gA5V2vd.png", "startingAmount": 1},
            {"cardId": "076", "name": "Small Troll", "type": "minion", "atk": 3, "hp": 3, "cost": 3, "description": "Small troll with regenerative powers.", "image": "https://i.imgur.com/R5AKvO4.png", "startingAmount": 2},
            {"cardId": "077", "name": "Human Upgrade", "type": "minion", "atk": 4, "hp": 4, "cost": 5, "description": "Upgraded human with enhanced armor.", "image": "https://i.imgur.com/9lhozCz.png", "startingAmount": 1},
            {"cardId": "078", "name": "Dwarf Heavy", "type": "minion", "atk": 4, "hp": 6, "cost": 5, "description": "Heavy dwarf with a warhammer.", "image": "https://i.imgur.com/oGautmG.png", "startingAmount": 1},
            {"cardId": "079", "name": "Scourge Familiar", "type": "minion", "atk": 2, "hp": 2, "cost": 2, "description": "Dark familiar that boosts spells.", "image": "https://i.imgur.com/FcwHTwA.png", "startingAmount": 2},
            {"cardId": "080", "name": "Faitherbearer", "type": "minion", "atk": 5, "hp": 5, "cost": 6, "description": "Bearer of faith with divine strength.", "image": "https://i.imgur.com/ENXGMbn.jpg", "startingAmount": 0},
            {"cardId": "081", "name": "Explosion 2", "type": "spell", "cost": 5, "description": "Deal 8 damage to a target and 2 to adjacent enemies.", "image": "https://i.imgur.com/vUfG5PJ.png", "startingAmount": 1},
            {"cardId": "082", "name": "Explosion 1", "type": "spell", "cost": 3, "description": "Deal 5 damage to a target and 1 to adjacent enemies.", "image": "https://i.imgur.com/lAUM1L7.png", "startingAmount": 1},
            {"cardId": "083", "name": "Spell Ball", "type": "spell", "cost": 2, "description": "Deal 3 damage to a random enemy and draw a card.", "image": "https://i.imgur.com/1iicyne.png", "startingAmount": 1},
            {"cardId": "084", "name": "Fire Swirl", "type": "spell", "cost": 4, "description": "Deal 4 damage to all enemies.", "image": "https://i.imgur.com/dramBbf.png", "startingAmount": 1},
            {"cardId": "085", "name": "Fire Ball", "type": "spell", "cost": 4, "description": "Deal 6 damage to a target.", "image": "https://i.imgur.com/KfE0K3N.png", "startingAmount": 1},
            {"cardId": "086", "name": "Purple Swipe", "type": "spell", "cost": 3, "description": "Deal 4 damage and reduce target atk by 1.", "image": "https://i.imgur.com/X4uVLBC.png", "startingAmount": 1},
            {"cardId": "087", "name": "Sword", "type": "spell", "cost": 2, "description": "Give a minion +2 atk this turn.", "image": "https://i.imgur.com/u95mHRc.png", "startingAmount": 1},
            {"cardId": "088", "name": "Pick Axe Efforts", "type": "spell", "cost": 3, "description": "Deal 3 damage and gain 2 armor.", "image": "https://i.imgur.com/OaIxVfq.png", "startingAmount": 1},
            {"cardId": "089", "name": "Book", "type": "spell", "cost": 1, "description": "Draw 2 cards.", "image": "https://i.imgur.com/LhKeIUk.png", "startingAmount": 1},
            {"cardId": "090", "name": "Light", "type": "spell", "cost": 2, "description": "Restore 4 health to a friendly character.", "image": "https://i.imgur.com/8fYU7nG.png", "startingAmount": 1, "tribe": "silver"},
            {"cardId": "091", "name": "Light 2", "type": "spell", "cost": 3, "description": "Restore 6 health to a friendly character.", "image": "https://i.imgur.com/FGmWArp.png", "startingAmount": 1, "tribe": "silver"},
            {"cardId": "092", "name": "Arcane", "type": "spell", "cost": 5, "description": "Deal 5 damage to a target and stun it.", "image": "https://i.imgur.com/dU3QrVi.png", "startingAmount": 1, "tribe": "purple"},
            {"cardId": "093", "name": "Mystic Green", "type": "spell", "cost": 4, "description": "Restore 5 health to all friendly characters.", "image": "https://i.imgur.com/ra2S7o0.png", "startingAmount": 1, "tribe": "silver"},
            {"cardId": "094", "name": "Red Skull Magic", "type": "spell", "cost": 6, "description": "Deal 6 damage to a target and summon a 2/2 skull.", "image": "https://i.imgur.com/KjBYZ7L.png", "startingAmount": 0, "tribe": "red"},
            {"cardId": "095", "name": "Void Pulse", "type": "spell", "cost": 4, "description": "Deal 3 damage to all enemies.", "image": "https://i.imgur.com/oPFVuMN.png", "startingAmount": 1, "tribe": "purple"},
            {"cardId": "096", "name": "Starfall", "type": "spell", "cost": 7, "description": "Deal 5 damage to all enemies and heal allies for 3.", "image": "https://i.imgur.com/jQbF07m.png", "startingAmount": 0, "tribe": "orange"},
            {"cardId": "097", "name": "Blood Surge", "type": "spell", "cost": 3, "description": "Give a minion +3 attack this turn.", "image": "https://i.imgur.com/36iR3J8.png", "startingAmount": 1, "tribe": "red"},
            {"cardId": "098", "name": "Ethereal Bind", "type": "spell", "cost": 5, "description": "Silence a target and deal 2 damage.", "image": "https://i.imgur.com/v0RBTiV.png", "startingAmount": 0, "tribe": "purple"},
            {"cardId": "099", "name": "Iron Ward", "type": "spell", "cost": 4, "description": "Give a minion +2 health and Taunt.", "image": "https://i.imgur.com/klAa6aX.png", "startingAmount": 1, "tribe": "silver"},
            {"cardId": "100", "name": "Tribal Rally", "type": "spell", "cost": 6, "description": "Summon two 2/2 minions with Taunt.", "image": "https://i.imgur.com/Wn84v6I.png", "startingAmount": 0, "tribe": "orange"}
        ];

        // Three.js Background
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('webgl'), alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);

        const particlesGeometry = new THREE.BufferGeometry();
        const particlesCount = 5000;
        const posArray = new Float32Array(particlesCount * 3);
        for (let i = 0; i < particlesCount * 3; i++) {
            posArray[i] = (Math.random() - 0.5) * 100;
        }
        particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        const particlesMaterial = new THREE.PointsMaterial({
            size: 0.1,
            color: 0x00FF7F,
            transparent: true,
            opacity: 0.6,
        });
        const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
        scene.add(particlesMesh);
        camera.position.z = 30;

        function animateBackground() {
            requestAnimationFrame(animateBackground);
            particlesMesh.rotation.y += 0.001;
            renderer.render(scene, camera);
        }
        animateBackground();

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // Card Rendering
        async function fetchUserCards() {
            const CardSignatures = Parse.Object.extend('CardSignatures');
            const query = new Parse.Query(CardSignatures);
            query.equalTo('user', Parse.User.current());
            try {
                const results = await query.find();
                return results.map(result => result.get('cardId'));
            } catch (error) {
                console.error('Error fetching user cards:', error);
                return [];
            }
        }

        function renderCards(cards) {
            const container = document.getElementById('card-container');
            container.innerHTML = '';
            cards.forEach(card => {
                const cardElement = document.createElement('div');
                cardElement.className = 'game-card';
                cardElement.innerHTML = `
                    <div class="emerald-gold-border ethereal-signature season0-card ${card.tribe ? tribeData[card.tribe].cssClass : ''}">
                        <div class="card-background"></div>
                        <div class="signature-overlay">
                            <img src="https://i.imgur.com/d4I8ej6.png" alt="Signature" class="signature-image">
                        </div>
                        <div class="card-image-container">
                            <div class="mythril-bg animate-mythril-sparkle"></div>
                            <img src="${card.image}" alt="${card.name}" class="card-foreground">
                            <img src="https://i.imgur.com/SRoq392.png" alt="Season0 Stamp" class="season0-stamp">
                        </div>
                        <div class="card-text-area">
                            <h3 class="text-lg font-bold text-grudge-accent">${card.name}</h3>
                            <p class="text-sm text-tribe-blue">${card.description}</p>
                            ${card.type === 'minion' ? `
                                <p class="text-sm text-tribe-blue">Attack: ${card.atk} | Health: ${card.hp}</p>
                            ` : ''}
                            <p class="text-sm text-tribe-blue">Cost: ${card.cost} Mana</p>
                            ${card.tribe ? `
                                <p class="text-sm ${tribeData[card.tribe].color}">${tribeData[card.tribe].name}</p>
                            ` : ''}
                        </div>
                    </div>
                `;
                cardElement.addEventListener('click', () => showCardDetail(card));
                container.appendChild(cardElement);
            });
        }

        async function showCardDetail(card) {
            const modal = document.getElementById('card-detail-modal');
            document.getElementById('modal-card-name').textContent = card.name;
            document.getElementById('modal-card-fg').src = card.image;
            document.getElementById('modal-card-desc').textContent = card.description;
            document.getElementById('modal-card-cost').textContent = card.cost;
            document.getElementById('modal-card-type').textContent = card.type.charAt(0).toUpperCase() + card.type.slice(1);
            document.getElementById('modal-card-atk').textContent = card.atk !== undefined ? card.atk : 'N/A';
            document.getElementById('modal-card-hp').textContent = card.hp !== undefined ? card.hp : 'N/A';
            if (card.tribe) {
                document.getElementById('modal-tribe-name').textContent = tribeData[card.tribe].name;
                document.getElementById('modal-tribe-effect').textContent = tribeData[card.tribe].gameplayText;
                document.getElementById('modal-tribe-info').className = `bg-grudge-primary bg-opacity-20 p-3 rounded ${tribeData[card.tribe].cssClass}`;
            } else {
                document.getElementById('modal-tribe-name').textContent = 'None';
                document.getElementById('modal-tribe-effect').textContent = 'No Fortune Favor effect.';
                document.getElementById('modal-tribe-info').className = 'bg-grudge-primary bg-opacity-20 p-3 rounded';
            }
            modal.classList.remove('hidden');
        }

        document.getElementById('close-modal-btn').addEventListener('click', () => {
            document.getElementById('card-detail-modal').classList.add('hidden');
        });

        // Card Filtering and Search
        document.getElementById('card-search').addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            const filteredCards = allCards.filter(card => 
                card.name.toLowerCase().includes(searchTerm) || 
                card.description.toLowerCase().includes(searchTerm)
            );
            renderCards(filteredCards);
        });

        document.getElementById('card-filter').addEventListener('change', async (e) => {
            const filter = e.target.value;
            let filteredCards = [...allCards];
            if (filter === 'owned') {
                const userCards = await fetchUserCards();
                filteredCards = allCards.filter(card => userCards.includes(card.cardId));
            } else if (filter !== 'all') {
                filteredCards = allCards.filter(card => 
                    (filter === 'minion' && card.type === 'minion') ||
                    (filter === 'spell' && card.type === 'spell') ||
                    (filter === 'ship' && card.type === 'minion' && card.description.toLowerCase().includes('space')) ||
                    (filter === 'unique' && card.startingAmount === 0) ||
                    (card.tribe === filter)
                );
            }
            renderCards(filteredCards);
        });

        // Card Pack Opening
        document.getElementById('open-pack-btn').addEventListener('click', () => {
            const modal = document.getElementById('pack-opening-modal');
            const packContainer = document.getElementById('pack-container');
            const closeBtn = document.getElementById('close-pack-btn');
            packContainer.innerHTML = '';
            const packSize = 5;
            const packCards = [];
            for (let i = 0; i < packSize; i++) {
                const randomCard = allCards[Math.floor(Math.random() * allCards.length)];
                packCards.push(randomCard);
                const cardElement = document.createElement('div');
                cardElement.className = 'w-32 h-48 bg-grudge-primary rounded-lg cursor-pointer transform transition hover:scale-105 game-card';
                cardElement.addEventListener('click', () => {
                    cardElement.innerHTML = `
                        <div class="emerald-gold-border ethereal-signature season0-card ${randomCard.tribe ? tribeData[randomCard.tribe].cssClass : ''}">
                            <div class="card-background"></div>
                            <div class="signature-overlay">
                                <img src="https://i.imgur.com/d4I8ej6.png" alt="Signature" class="signature-image">
                            </div>
                            <div class="card-image-container">
                                <div class="mythril-bg animate-mythril-sparkle"></div>
                                <img src="${randomCard.image}" alt="${randomCard.name}" class="card-foreground">
                                <img src="https://i.imgur.com/SRoq392.png" alt="Season0 Stamp" class="season0-stamp">
                            </div>
                        </div>
                    `;
                    cardElement.style.transform = `rotate(${(Math.random() - 0.5) * 6}deg)`;
                    cardElement.classList.remove('hover:scale-105', 'hover:rotate-3', 'hover:-rotate-3', 'hover:rotate-2', 'hover:-rotate-2', 'hover:rotate-1');
                    if (packContainer.querySelectorAll('.game-card').length === packCards.length) {
                        closeBtn.classList.remove('hidden');
                    }
                });
                packContainer.appendChild(cardElement);
            }
            modal.classList.remove('hidden');
        });

        document.getElementById('close-pack-btn').addEventListener('click', () => {
            document.getElementById('pack-opening-modal').classList.add('hidden');
            document.getElementById('close-pack-btn').classList.add('hidden');
        });

        // Rarity Chart
        document.getElementById('rarity-chart-btn').addEventListener('click', () => {
            document.getElementById('rarity-chart-container').classList.add('active');
        });

        document.getElementById('close-rarity-chart').addEventListener('click', () => {
            document.getElementById('rarity-chart-container').classList.remove('active');
        });

        // Tooltip Handling
        document.addEventListener('mousemove', (e) => {
            const tooltip = document.querySelector('.tooltip');
            if (tooltip) {
                tooltip.style.left = `${e.clientX + 10}px`;
                tooltip.style.top = `${e.clientY + 10}px`;
            }
        });

        // Initial Render
        renderCards(allCards);
    </script>
</body>
</html>